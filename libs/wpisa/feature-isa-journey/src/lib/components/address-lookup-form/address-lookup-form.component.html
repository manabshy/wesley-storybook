<form [formGroup]="form">
  <div class="row">
    <div class="col-12 col-md-4">
      <wes-form-field id="postcodeFormField" class="d-block mb-3 mb-md-2">
        <wes-label labelTestId="lblFindAddressPostcode">{{
          pageContent.addressDetails.postcode.inputLabel
        }}</wes-label>
        <input
          wesInput
          type="text"
          formControlName="postcode"
          autocomplete="postal-code"
          data-test="txtFindAddressPostcode"
          #postcodeInput
        />
        <wes-error *ngIf="isFieldInvalid('postcode')">
          <wes-form-field-error>
            {{ pageContent.addressDetails.postcode.inputError }}
          </wes-form-field-error>
        </wes-error>
      </wes-form-field>
    </div>
    <div class="col-12 col-md-8 align-self-end">
      <button
        id="findButton"
        class="wes-button wes-button-primary d-block mb-3 mb-md-2"
        type="button"
        data-test="btnFindAddress"
        [wesButtonLoader]="findingAddress"
        (click)="findAddress(postcodeInput.value)"
      >
        {{ pageContent.addressDetails.findAddress }}
      </button>
    </div>
  </div>

  <wes-form-field class="d-block mb-3" *ngIf="addressList.length > 0">
    <wes-label labelTestId="lblAddressList">{{
      pageContent.addressDetails.selectYourAddress.inputLabel
    }}</wes-label>

    <select
      wesNativeControl
      formControlName="selectedAddressId"
      (change)="onSelectedAddress($event)"
      data-test="ddAddressList"
    >
      <option *ngFor="let address of addressList" [value]="address.moniker">{{
        address.singleLine
      }}</option>
    </select>

    <wes-error *ngIf="isFieldInvalid('selectedAddressId')">
      <wes-form-field-error>
        {{ pageContent.addressDetails.selectYourAddress.inputError }}
      </wes-form-field-error>
    </wes-error>
  </wes-form-field>
  <p class="wes-text-s">
    <ng-container *ngIf="addressList.length > 0"
      >{{ pageContent.addressDetails.cantSeeAddressLabel }}&nbsp;</ng-container
    >

    <button
      type="button"
      class="wes-button wes-button-link"
      (click)="onShowManualAddress()"
      data-test="btnEnterAddressManually"
    >
      {{ pageContent.addressDetails.enterAddressManuallyLabel }}
    </button>
  </p>
</form>
<!-- Lookup Valid {{ form.valid }} -->
