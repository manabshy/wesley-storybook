<ng-container *ngIf="content">
  <form [formGroup]="form" class="mb-5 mb-md-6">
    <div class="mb-3 wes-tooltip wes-tooltip-top-right d-block">
      <div class="wes-tooltip-content">
        <img
          src="/assets/icons/svg/icon-info.svg"
          alt="tooltip icon"
          class="wes-icon"
        />
        <p class="wes-text-shortform">{{ content.bankNameTooltip }}</p>
      </div>
    </div>

    <wes-form-field id="bankName" class="mb-4">
      <wes-label labelTestId="lblBankName">{{
        content.bankName.inputLabel
      }}</wes-label>
      <input
        wesInput
        type="text"
        formControlName="bankName"
        [errorStateMatcher]="errorStateMatcher"
        spellcheck="false"
        data-test="txtBankName"
      />
      <wes-error *ngIf="isFieldInvalid('bankName')">
        <wes-form-field-error>
          {{ content.bankName.inputError }}
        </wes-form-field-error>
      </wes-error>
    </wes-form-field>

    <wes-form-field id="accountName" class="mb-4">
      <wes-label labelTestId="lblAccountHolderFullName">{{
        content.accountName.inputLabel
      }}</wes-label>
      <input
        wesInput
        type="text"
        formControlName="accountHolderFullName"
        [errorStateMatcher]="errorStateMatcher"
        spellcheck="false"
        data-test="txtAccountHolderFullName"
      />
      <wes-error *ngIf="isFieldInvalid('accountHolderFullName')">
        <wes-form-field-error>
          {{ content.accountName.inputError }}
        </wes-form-field-error>
      </wes-error>
    </wes-form-field>

    <wes-form-field id="accountNumber" class="mb-4">
      <wes-label labelTestId="lblAccountNumber">{{
        content.accountNumber.inputLabel
      }}</wes-label>
      <input
        wesInput
        type="text"
        formControlName="accountNumber"
        [errorStateMatcher]="errorStateMatcher"
        inputmode="numeric"
        spellcheck="false"
        data-test="txtAccountNumber"
      />
      <wes-error *ngIf="isFieldInvalid('accountNumber')">
        <wes-form-field-error>
          {{ content.accountNumber.inputError }}
        </wes-form-field-error>
      </wes-error>
    </wes-form-field>

    <div class="row" formGroupName="sortCode">
      <div class="col-lg-5">
        <label
          class="wes-form-field-label"
          for="sortCode"
          data-test="lblSortCode"
          >{{ content.sortCode.inputLabel }}</label
        >
        <div class="boxes">
          <wes-form-field class="sort-code-box">
            <span id="sortCode1" class="cdk-visually-hidden"
              >Sort code text box 1</span
            >

            <input
              wesInput
              type="text"
              formControlName="c1"
              [errorStateMatcher]="errorStateMatcher"
              inputmode="numeric"
              spellcheck="false"
              maxlength="2"
              wesNumbersOnly
              data-test="txtSortCode1"
              aria-labelledby="sortCode1"
            />
          </wes-form-field>

          <wes-form-field class="sort-code-box mx-2">
            <span id="sortCode2" class="cdk-visually-hidden"
              >Sort code text box 2</span
            >
            <input
              wesInput
              type="text"
              formControlName="c2"
              [errorStateMatcher]="errorStateMatcher"
              inputmode="numeric"
              spellcheck="false"
              maxlength="2"
              wesNumbersOnly
              data-test="txtSortCode2"
              aria-labelledby="sortCode2"
            />
          </wes-form-field>

          <wes-form-field class="sort-code-box">
            <span id="sortCode3" class="cdk-visually-hidden"
              >Sort code text box 3</span
            >
            <input
              wesInput
              type="text"
              formControlName="c3"
              [errorStateMatcher]="errorStateMatcher"
              inputmode="numeric"
              spellcheck="false"
              maxlength="2"
              wesNumbersOnly
              data-test="txtSortCode3"
              aria-labelledby="sortCode3"
            />
          </wes-form-field>
        </div>
        <wes-error *ngIf="isFieldInvalid('sortCode') && showSortCodeError()">
          <wes-form-field-error>
            {{ content.sortCode.inputError }}
          </wes-form-field-error>
        </wes-error>
      </div>
    </div>
    <ng-content></ng-content>
  </form>

  <div class="direct-debit-guarantee wes-bg-solid-grey-50 p-3">
    <h2 class="wes-h6">{{ content.heading }}</h2>
    <div class="row">
      <div class="col-7 pr-0 col-md-10 col-xl-8">
        <div class="wes-text-shortform" [innerHtml]="content.summary"></div>
      </div>
      <div class="col-5 col-md-2 offset-xl-2 text-right pt-1 pt-md-0">
        <img
          class="mt-md-n3"
          src="/assets/images/direct-debit-logo.png"
          alt="Direct debit guarantee logo"
        />
      </div>
    </div>

    <hr class="my-3" />
    <div
      class="wes-text-shortform direct-debit-copy"
      [innerHtml]="content.bodyCopy"
    ></div>
  </div>
</ng-container>
