<a [routerLink]="investmentOptionLink">{{ pageContent.backButtonLabel }}</a>
<h3>{{ pageContent.heading }}</h3>
<div [innerHtml]="pageContent.summary"></div>

<form [formGroup]="form" (ngSubmit)="onSubmit()" wesInvalidControlScroll>
  <div class="form-group" formGroupName="totalAmount">
    <div class="form-group">
      <label for="lumpSumAmount">{{
        pageContent.lumpSumAmount.inputLabel
      }}</label>
      <input
        class="form-control"
        type="text"
        name="lumpSumAmount"
        formControlName="lumpSumAmount"
      />
      <ng-container *ngIf="isFieldInvalid('totalAmount.lumpSumAmount')">
        <span>
          {{ pageContent.lumpSumAmount.inputError }}
        </span>
      </ng-container>
    </div>
    <div>{{ pageContent.lumpSumTooltip }}</div>
    <hr />

    <div class="form-group">
      <label for="monthlyAmount">{{
        pageContent.monthlyAmount.inputLabel
      }}</label>
      <input
        class="form-control"
        type="text"
        name="monthlyAmount"
        formControlName="monthlyAmount"
      />
      <div>{{ pageContent.monthlyHelpText }}</div>
      <ng-container *ngIf="isFieldInvalid('totalAmount.monthlyAmount')">
        <span
          *ngIf="monthlyControl.errors.min || monthlyControl.errors.required"
        >
          {{ pageContent.monthlyAmount.inputMinError }}
        </span>
        <span *ngIf="monthlyControl.errors.max">
          {{ pageContent.monthlyAmount.inputMaxError }}
        </span>
        <span *ngIf="monthlyControl.errors.totalAnnualAllowance">
          {{ pageContent.monthlyAmount.inputOtherError }}
        </span>
      </ng-container>
    </div>
  </div>

  <wes-direct-debit-form
    formControlName="directDebit"
    [content]="directDebitContent"
    [submitAttempt]="submitAttempt"
  ></wes-direct-debit-form>

  <button class="wes-button wes-button__primary" type="submit">
    {{ pageContent.nextButtonLabel }}
  </button>
</form>
<!-- <pre>
    Valid FULL FORM: {{ form.valid | json }}

    Valid DD {{ form.controls.directDebit.valid }}

    {{ form.value | json }}
    {{ monthlyControl.errors | json }}

</pre> -->
