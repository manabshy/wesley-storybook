<div class="container">
  <div class="row">
    <div
      class="col-md-10 offset-md-1 col-lg-8 offset-lg-2 pt-4 pt-md-7 mb-5 mb-md-7 mb-lg-8"
    >
      <a
        class="wes-link wes-icon wes-icon-chevron-left wes-text-s wes-text-semi-bold mb-3 mb-md-4 d-inline-block"
        [routerLink]="investmentOptionLink"
        data-test="lnkBackToInvestmentOptions"
      >
        {{ pageContent.backButtonLabel }}
      </a>
      <h1>{{ pageContent.heading }}</h1>
      <div [innerHtml]="pageContent.summary"></div>
    </div>
  </div>

  <div class="row mb-6 mb-md-7">
    <div class="col-12 col-md-5 col-lg-4 offset-lg-1 mb-3 mb-md-0">
      <ng-container *ngIf="investmentCardViewModelData$ | async as investment">
        <div class="wes-investment-card border h-100 p-3 px-lg-4">
          <div class="wes-card-title">
            <h2 class="wes-h4">{{ pageContent.yourInvestmentLabel }}</h2>
            <div class="flex-shrink-0">
              <a
                class="wes-link wes-text-s wes-text-semi-bold"
                [routerLink]="yourInvestmentLink"
                data-test="lnkBackToYourInvestment"
              >
                {{ pageContent.editLabel }}
              </a>
            </div>
          </div>
          <div class="wes-card-body d-md-flex flex-md-wrap">
            <dl>
              <dt>{{ investment.lumpSumPayment.label }}</dt>
              <dd data-test="pLumpSumAmount">
                {{ investment.lumpSumPayment.value }}
              </dd>

              <dt>{{ investment.monthlyPayment.label }}</dt>
              <dd data-test="pMonthlyAmount">
                {{ investment.monthlyPayment.value }}
              </dd>
            </dl>

            <div class="w-100">
              <p class="wes-text-s" data-test="pTotalAmount">
                {{ investment.total.label }}
                <strong>{{ investment.total.value }}*</strong>
              </p>
            </div>
            <hr class="my-3 w-100" />
            <p class="small-copy">{{ investment.smallCopy }}</p>
          </div>
        </div>
      </ng-container>
    </div>
    <div class="col-12 col-md-7 col-lg-6">
      <ng-container *ngIf="directDebitContent$ | async as dd">
        <div
          *ngIf="dd.showDD"
          class="wes-investment-card border mb-3 p-3 px-lg-4"
        >
          <div class="wes-card-title">
            <h2 class="wes-h4">{{ pageContent.directDebitLabel }}</h2>
            <div class="flex-shrink-0">
              <a
                class="wes-link wes-text-s wes-text-semi-bold"
                [routerLink]="yourInvestmentLink"
                data-test="lnkBackToDD"
              >
                {{ pageContent.editLabel }}
              </a>
            </div>
          </div>
          <div class="wes-card-body">
            <div class="row">
              <dl class="col-12 col-md-6 mb-0">
                <dt>{{ dd.accountNumber.label }}</dt>
                <dd class="mb-md-0">
                  {{ dd.accountNumber.value }}
                </dd>
              </dl>
              <dl class="col-12 col-md-6 mb-0">
                <dt>{{ dd.sortCode.label }}</dt>
                <dd class="mb-0">
                  {{ dd.sortCode.value }}
                </dd>
              </dl>
            </div>
          </div>
        </div>
      </ng-container>

      <ng-container *ngIf="personalDetailsContent$ | async as personalDetails">
        <div
          class="wes-investment-card border p-3 px-lg-4"
          [class.h-100]="!(directDebitContent$ | async)"
        >
          <div class="wes-card-title">
            <h2 class="wes-h4">{{ pageContent.yourDetailsLabel }}</h2>
            <div class="flex-shrink-0">
              <a
                class="wes-link wes-text-s wes-text-semi-bold"
                [routerLink]="yourDetailsLink"
                data-test="lnkBackToPersonalDetails"
              >
                {{ pageContent.editLabel }}
              </a>
            </div>
          </div>
          <div class="wes-card-body">
            <div class="row">
              <dl class="col-md-7">
                <dt>{{ personalDetails.name.label }}</dt>
                <dd>
                  {{ personalDetails.name.value }}
                </dd>
              </dl>
              <dl class="col-md-5">
                <dt>{{ personalDetails.dob.label }}</dt>
                <dd>
                  {{ personalDetails.dob.value }}
                </dd>
              </dl>
            </div>
            <div class="row">
              <dl class="col-md-7">
                <dt>{{ personalDetails.profession.label }}</dt>
                <dd>
                  {{ personalDetails.profession.value }}
                </dd>
              </dl>
              <dl class="col-md-5">
                <dt>{{ personalDetails.nationality.label }}</dt>
                <dd>
                  {{ personalDetails.nationality.value }}
                </dd>
              </dl>
            </div>
            <div class="row">
              <dl class="col-md-7">
                <dt>{{ personalDetails.emailAddress.label }}</dt>
                <dd class="text-break">
                  {{ personalDetails.emailAddress.value }}
                </dd>
              </dl>
              <dl class="col-md-5">
                <dt>{{ personalDetails.phoneNumber.label }}</dt>
                <dd>
                  {{ personalDetails.phoneNumber.value }}
                </dd>
              </dl>
            </div>
            <dl>
              <dt>{{ personalDetails.homeAddress.label }}</dt>
              <dd class="mb-0">
                {{ personalDetails.homeAddress.value }}
              </dd>
            </dl>
          </div>
        </div>
      </ng-container>
    </div>
  </div>

  <div class="row">
    <div class="col-md-10 offset-md-1 col-lg-8 offset-lg-2">
      <h2 class="wes-h2">{{ pageContent.isaLabel }}</h2>
      <div [innerHtml]="pageContent.confirmContent"></div>

      <button
        class="wes-button wes-button-primary d-block w-100 w-md-auto mt-5 mt-md-6"
        data-test="btnConfirm"
        (click)="onSubmit()"
      >
        {{ pageContent.nextButtonLabel }}
      </button>
    </div>
  </div>
</div>
