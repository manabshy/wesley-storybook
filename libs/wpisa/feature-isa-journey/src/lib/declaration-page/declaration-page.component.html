<a
  class="wes-link wes-text-s mb-3 mb-md-4 d-inline-block"
  [routerLink]="investmentOptionLink"
  >{{ pageContent.backButtonLabel }}</a
>
<h1>{{ pageContent.heading }}</h1>
<div [innerHtml]="pageContent.summary"></div>

<!-- <pre
  >{{ selectedInvestmentOption$ | async | json }}
  >{{ investmentCardViewModelData$ | async | json }}
  >{{ directDebitContent$ | async | json }}
  >{{ personalDetailsContent$ | async | json }}
</pre> -->
<ng-container *ngIf="investmentCardViewModelData$ | async as investment">
  <div class="wes-investment-card">
    <div class="wes-card-title">
      <div>{{ pageContent.yourInvestmentLabel }}</div>
      <div>
        <a class="wes-link" [routerLink]="yourInvestmentLink">{{
          pageContent.editLabel
        }}</a>
      </div>
    </div>
    <div class="wes-card-body">
      <div *ngIf="investment.showLumpSum">
        <span>{{ investment.lumpSumPayment.label }}</span
        ><span>{{ investment.lumpSumPayment.value }}</span>
      </div>
      <div *ngIf="investment.showMonthly">
        <span>{{ investment.monthlyPayment.label }}</span
        ><span
          >{{ investment.monthlyPayment.value }}
          {{ pageContent.perMonthLabel }}</span
        >
      </div>
      <div>
        <span>{{ investment.total.label }}</span
        ><span>{{ investment.total.value }}</span>
      </div>
    </div>
  </div>
</ng-container>

<ng-container *ngIf="directDebitContent$ | async as dd">
  <div class="wes-investment-card">
    <div class="wes-card-title">
      <div>{{ pageContent.directDebitLabel }}</div>
      <div>
        <a class="wes-link" [routerLink]="yourInvestmentLink">{{
          pageContent.editLabel
        }}</a>
      </div>
    </div>
    <div class="wes-card-body">
      <div>
        <span>{{ dd.accountNumber.label }}</span
        ><span>{{ dd.accountNumber.value }}</span>
      </div>
      <div>
        <span>{{ dd.sortCode.label }}</span
        ><span>{{ dd.sortCode.value }}</span>
      </div>
    </div>
  </div>
</ng-container>

<ng-container *ngIf="personalDetailsContent$ | async as personalDetails">
  <div class="wes-investment-card">
    <div class="wes-card-title">
      <div>{{ pageContent.yourDetailsLabel }}</div>
      <div>
        <a class="wes-link" [routerLink]="yourDetailsLink">{{
          pageContent.editLabel
        }}</a>
      </div>
    </div>
    <div class="wes-card-body">
      <div>
        <span>{{ personalDetails.name.label }}</span
        ><span>{{ personalDetails.name.value }}</span>
      </div>
      <div>
        <span>{{ personalDetails.dob.label }}</span
        ><span>{{ personalDetails.dob.value }}</span>
      </div>
      <div>
        <span>{{ personalDetails.profession.label }}</span
        ><span>{{ personalDetails.profession.value }}</span>
      </div>
      <div>
        <span>{{ personalDetails.nationality.label }}</span
        ><span>{{ personalDetails.nationality.value }}</span>
      </div>
      <div>
        <span>{{ personalDetails.emailAddress.label }}</span
        ><span>{{ personalDetails.emailAddress.value }}</span>
      </div>
      <div>
        <span>{{ personalDetails.phoneNumber.label }}</span
        ><span>{{ personalDetails.phoneNumber.value }}</span>
      </div>
      <div>
        <span>{{ personalDetails.homeAddress.label }}</span
        ><span>{{ personalDetails.homeAddress.value }}</span>
      </div>
    </div>
  </div>
</ng-container>

<h4>{{ pageContent.isaLabel }}</h4>
<div [innerHtml]="pageContent.isaRules"></div>
<div [innerHtml]="pageContent.adviceContent"></div>
<hr />
<form [formGroup]="form" (ngSubmit)="onSubmit()" wesInvalidControlScroll>
  <div class="wes-checkbox" id="wes-checkbox-1">
    <label class="wes-checkbox-layout" for="wes-checkbox-1-input">
      <div class="wes-checkbox-inner-container">
        <input
          type="checkbox"
          class="wes-checkbox-input cdk-visually-hidden"
          id="wes-checkbox-1-input"
          tabindex="0"
          aria-checked="false"
          formControlName="authorise"
        />
      </div>
      <span class="wes-checkbox-label">{{
        pageContent.authoriseCheckbox.inputLabel
      }}</span>
      <ng-container *ngIf="isFieldInvalid('authorise')">
        <span>
          {{ pageContent.authoriseCheckbox.inputError }}
        </span>
      </ng-container>
    </label>
  </div>
  <div [innerHtml]="pageContent.authoriseContent"></div>

  <div class="wes-checkbox" id="wes-checkbox-2">
    <label class="wes-checkbox-layout" for="wes-checkbox-2-input">
      <div class="wes-checkbox-inner-container">
        <input
          type="checkbox"
          class="wes-checkbox-input cdk-visually-hidden"
          id="wes-checkbox-2-input"
          tabindex="0"
          aria-checked="false"
          formControlName="declaration"
        />
      </div>
      <span class="wes-checkbox-label">{{
        pageContent.declarationCheckbox.inputLabel
      }}</span>
      <ng-container *ngIf="isFieldInvalid('declaration')">
        <span>
          {{ pageContent.declarationCheckbox.inputError }}
        </span>
      </ng-container>
    </label>
  </div>
  <div [innerHtml]="pageContent.content"></div>

  <div [innerHtml]="pageContent.confirmContent"></div>
  <button
    class="wes-button wes-button-primary mt-5 mt-md-6"
    type="submit"
    data-test="btnConfirm"
  >
    {{ pageContent.nextButtonLabel }}
  </button>
</form>
